generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Cidade {
  id                Int                @id @default(autoincrement())
  nome              String
  gentilico         String
  dataFundacao      DateTime
  dataAniversario   DateTime
  breveHistorico    String
  padroeiro         String
  pratoTipico       String
  fotoPerfil        String?
  fotoBackground    String?
  datasHistoricas   String?            // Datas de Relevância Histórica / Feriados Locais (ex: "04/08 (Aniv.); 24/06 (S. João)")
  periodoFestas     String?            // Período de Exposições e Festas (ex: "Outubro: Festa de São Benedito")
  createdAt         DateTime           @default(now())
  updatedAt         DateTime           @updatedAt
  dadosDemograficos DadosDemograficos?
  dadosVotacao      DadosVotacao?
  deputadosFederais DeputadoFederal[]
  emendas           Emenda[]
  eventosProximos   EventoProximo[]
  liderancas        Lideranca[]
  pautas            Pauta[]

  @@map("cidades")
}

model DadosDemograficos {
  id                    Int      @id @default(autoincrement())
  cidadeId              Int      @unique
  percentualRural       Float
  percentualUrbano      Float
  percentualCatolico    Float
  percentualEspirita    Float
  percentualEvangelico  Float
  percentualSemReligiao Float
  religiaoPredominante  String
  taxaAlfabetizacao     Float
  principaisBairros     String
  createdAt             DateTime @default(now())
  updatedAt             DateTime @updatedAt
  cidade                Cidade   @relation(fields: [cidadeId], references: [id], onDelete: Cascade)

  @@map("dados_demograficos")
}

model EventoProximo {
  id               Int      @id @default(autoincrement())
  cidadeId         Int
  festaTradicional String
  dataFeriado      DateTime
  fotos            String
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
  cidade           Cidade   @relation(fields: [cidadeId], references: [id], onDelete: Cascade)

  @@map("eventos_proximos")
}

model DadosVotacao {
  id                               Int      @id @default(autoincrement())
  cidadeId                         Int      @unique
  votosPauloAlexandre2022          Int
  votosOutrosDeputadosFederais2022 Int
  votosPSDBTotal2022               Int
  votosPSDTotal2022                Int
  votosOutrosPartidos2022          Int
  votosPresidente2022              String
  votosGovernador2022              String
  pesquisasEleitorais              String?
  votosLegendaPSDB45               Int
  votosLegendaPSD55                Int
  createdAt                        DateTime @default(now())
  updatedAt                        DateTime @updatedAt
  cidade                           Cidade   @relation(fields: [cidadeId], references: [id], onDelete: Cascade)

  @@map("dados_votacao")
}

model Emenda {
  id                  Int      @id @default(autoincrement())
  cidadeId            Int
  codigoEmenda        String?
  numeroEmenda        String?
  anoEmenda           Int?
  tipoEmenda          String?
  autor               String?
  localidadeGasto     String?
  funcao              String?
  subfuncao           String?
  descricao           String
  entidadeBeneficiada String
  valorEmenda         Float
  valorEmpenhado      Float
  valorLiquidado      Float    @default(0)
  valorPago           Float    @default(0)
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt
  cidade              Cidade   @relation(fields: [cidadeId], references: [id], onDelete: Cascade)

  @@map("emendas")
}

model Lideranca {
  id                 Int       @id @default(autoincrement())
  cidadeId           Int
  nomeLideranca      String
  fotoLideranca      String?
  nomeGestor         String
  cargo              String
  partido            String
  historicoComPAB    String
  votos2024          Int
  votosPrevistos2026 String?
  dataVisitaGestor   DateTime?
  createdAt          DateTime  @default(now())
  updatedAt          DateTime  @updatedAt
  cidade             Cidade    @relation(fields: [cidadeId], references: [id], onDelete: Cascade)

  @@map("liderancas")
}

model Pauta {
  id                     Int      @id @default(autoincrement())
  cidadeId               Int
  dataPublicacao         DateTime
  urlFonte               String
  titulo                 String
  resumoProblema         String
  localizacaoEspecifica  String
  categoria              String
  volumeMencoes          Int
  nivelUrgencia          Int
  sentimentoPredominante String
  autoridadeResponsavel  String
  statusResposta         String
  tempoAtraso            Int
  createdAt              DateTime @default(now())
  updatedAt              DateTime @updatedAt
  cidade                 Cidade   @relation(fields: [cidadeId], references: [id], onDelete: Cascade)

  @@map("pautas")
}

model DeputadoFederal {
  id         Int      @id @default(autoincrement())
  cidadeId   Int
  nome       String
  nomeUrna   String
  partido    String
  numeroUrna String
  votos2022  Int
  eleito     Boolean  @default(false)
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
  posicao    Int      @default(0)
  cidade     Cidade   @relation(fields: [cidadeId], references: [id], onDelete: Cascade)

  @@map("deputados_federais")
}
